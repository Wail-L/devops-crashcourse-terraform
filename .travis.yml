# travis.yml
#test
sudo: required

language: php

services:
   - docker

script:
  # Build docker image
  terraform plan ./terraform
post_install:
  # Push docker image to Docker Hub

before_deploy:
   # Install terraform§§
  - curl -sLo /tmp/terraform.zip https://releases.hashicorp.com/terraform/0.8.8/terraform_0.8.8_linux_amd64.zip
  - unzip terraform_0.8.8_linux_amd64.zip
  - mv terraform /usr/local/bin/
  - export PATH="~/bin:$PATH"
deploy:
   # Deploy using terraform
  provider: s3
  access_key_id: $AWS_ACCESS_KEY
  secret_access_key: $AWS_SECRET_KEY
  bucket: "terraform-test00"
  skip_cleanup: true
  region: eu-west-1

provider: s3
  access_key_id: $AWS_ACCESS_KEY
  secret_access_key: $AWS_SECRET_KEY